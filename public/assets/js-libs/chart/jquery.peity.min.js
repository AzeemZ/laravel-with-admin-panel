(function(c,b){function e(g,i){var f=b.createElement("canvas");f.setAttribute("width",g*a);f.setAttribute("height",i*a);a!=1&&f.setAttribute("style","width:"+g+"px;height:"+i+"px");return f}var d=c.fn.peity=function(f,g){b.createElement("canvas").getContext&&this.each(function(){c(this).change(function(){var h=c.extend({},g),j=this;c.each(h,function(k,l){c.isFunction(l)&&(h[k]=l.call(j))});var i=c(this).html();d.graphers[f].call(this,c.extend({},d.defaults[f],h));c(this).trigger("chart:changed",i)}).trigger("change")});return this};d.graphers={};d.defaults={};d.add=function(g,i,f){d.graphers[g]=f;d.defaults[g]=i};var a=window.devicePixelRatio||1;d.add("pie",{colours:["#e9b104","#FF9900"],delimeter:"/",diameter:16},function(i){var j=c(this),g=j.text().split(i.delimeter),m=parseFloat(g[0]),k=parseFloat(g[1]),g=-Math.PI/2,m=m/k*Math.PI*2,k=e(i.diameter,i.diameter),l=k.getContext("2d"),n=k.width/2;l.beginPath();l.moveTo(n,n);l.arc(n,n,n,m+g,m==0?Math.PI*2:g,!1);l.fillStyle=i.colours[0];l.fill();l.beginPath();l.moveTo(n,n);l.arc(n,n,n,g,m+g,!1);l.fillStyle=i.colours[1];l.fill();j.wrapInner(c("<span>").hide()).append(k)});d.add("line",{colour:"#c6d9fd",strokeColour:"#4d89f9",strokeWidth:1,delimeter:",",height:16,max:null,min:0,width:32},function(B){var u=c(this),A=e(B.width,B.height),y=u.text().split(B.delimeter);y.length==1&&y.push(y[0]);var w=Math.max.apply(Math,y.concat([B.max])),x=Math.min.apply(Math,y.concat([B.min])),z=A.getContext("2d"),v=A.width,r=A.height,i=v/(y.length-1),w=r/(w-x),o=[],t;z.beginPath();z.moveTo(0,r+x*w);for(t=0;t<y.length;t++){var s=t*i,m=r-w*(y[t]-x);o.push({x:s,y:m});z.lineTo(s,m)}z.lineTo(v,r+x*w);z.fillStyle=B.colour;z.fill();if(B.strokeWidth){z.beginPath();z.moveTo(0,o[0].y);for(t=0;t<o.length;t++){z.lineTo(o[t].x,o[t].y)}z.lineWidth=B.strokeWidth*a;z.strokeStyle=B.strokeColour;z.stroke()}u.wrapInner(c("<span>").hide()).append(A)});d.add("bar",{colour:"#4D89F9",delimeter:",",height:16,max:null,min:0,width:32},function(t){var m=c(this),s=m.text().split(t.delimeter),q=Math.max.apply(Math,s.concat([t.max])),o=Math.min.apply(Math,s.concat([t.min])),p=e(t.width,t.height),r=p.getContext("2d"),n=p.height,q=n/(q-o),i=a/2,j=(p.width+i)/s.length;r.fillStyle=t.colour;for(t=0;t<s.length;t++){r.fillRect(t*j,n-q*(s[t]-o),j-i,q*s[t])}m.wrapInner(c("<span>").hide()).append(p)})})(jQuery,document);